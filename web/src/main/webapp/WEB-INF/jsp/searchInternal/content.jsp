<!DOCTYPE html><%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %><%@ taglib prefix="u" uri="http://openkm.com/tags/utils" %><%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %><%@ page contentType="text/html;charset=UTF-8" language="java" %><html lang="es"><head>    <jsp:include page="/header"/>    <style type="text/css">        /* For select picker */        .bootstrap-select {            width: 115px !important;        }    </style>    <script type="text/javascript">        function showPreview() {            document.getElementById('preview-doc').style.display = 'inline';            calculatePreviewHeight(); // Redimensionar el iframe de la vista previa        }        // Funcipara calcular la altura del iframe de la vista previa        function calculatePreviewHeight() {            var position = $("#preview-doc").offset();            $("#preview-doc").height($(window).height() - (position.top + 27));        }        // Llamar a la funcide redimensionamiento al cargar y redimensionar la ventana        window.onload = function() {            showPreview(); // Mostrar la vista previa por defecto al cargar la p        };        window.onresize = function() {            if (document.getElementById('preview-doc').style.display === 'inline') {                calculatePreviewHeight();            }        };        function changePreviewContent(uuid) {            $.get('${pageContext.request.contextPath}/propertyGroup/getPreviewURL',                {                    uuid: uuid                },                function (data, status, xhr) {                    if (status === "success") {                        $('#preview-doc').attr('src', data);                    }                }            );        }        // Función para limpiar la tabla        function clearTable() {            const table = document.getElementById("documentTable");            if (table) {                const tbody = table.querySelector("tbody");                if (tbody) {                    tbody.innerHTML = ""; // Borra el contenido del cuerpo de la tabla                }            }        }        // Función para limpiar el contenido del iframe de vista previa        function clearPreview() {            const previewFrame = document.getElementById("preview-doc");            if (previewFrame) {                previewFrame.src = ""; // Borra la URL del iframe para limpiar la vista previa            }        }        // Función que llama a ambas acciones de limpieza        function cleanAll() {            clearTable(); // Limpiar la tabla            clearPreview(); // Limpiar la vista previa        }        $(document).ready(function () {            var pagination = new Pagination('#documentTable', 5);            pagination.generatePagination();            pagination.handlePaginationClicks();            <c:if test="${alertExpired eq 'sessionExpired'}">            $("#sessionExpiredAlert").show();            </c:if>            $('#searchButton').on('click', function () {                $("#searchButton").html('Searching...');                $("#chgPrjFormContent").submit();            });        });    </script></head><body class="body-index"><jsp:include page="/menu">    <jsp:param name="title" value="BIBLIOTECA INTERNA" /></jsp:include><div class="container-fluid" style="background-color:#f1f1f1; padding: 0; margin-top: -17px;">    <div class="row"> <!-- Añadimos fila para la distribución -->        <div class="col-sm-6"> <!-- Sección izquierda con tabla y pestañas -->            <div class="tab-content" style="background-color: white;" >                <div role="tabpanel" class="tab-pane active" id="form1" >                    <form role="form" id="chgPrjFormContent"                          action="${pageContext.request.contextPath}/searchInternal/findContent" method="post"                          class="form-horizontal" style="margin:10px 0 10px 0; padding: 10px 20px;"> <!-- Ajusta el margen y padding -->                        <!-- Contenedor con flexbox para alinear el input y los botones -->                        <div class="form-group" style="display: flex; align-items: center; justify-content: space-between;">                            <!-- Input -->                            <div style="flex: 1; margin-right: 10px;">                                <label for="Content">Content:</label>                                <input class="form-control" name="content" id="Content" style="width: 100%;"> <!-- Alineación de ancho completo -->                            </div>                            <!-- Botones -->                            <div>                                <button id="searchButton" type="button" style="margin-right: 10px;">                                    BUSCAR                                </button>                                <button id="cleanButton" type="button" onclick="cleanAll()">                                    LIMPIAR                                </button>                            </div>                        </div>                    </form>                </div>            </div>            <div class="col-sm-12" style="margin:0; padding:0;">                <table id="documentTable" class="table table-striped" style="font-size: 13px;">                    <thead>                    <tr class="info">                        <th>Título</th>                        <th>Tamaño</th>                        <th>Autor</th>                        <th>Edición</th>                        <th>Año</th>                        <th>Acción</th>                    </tr>                    </thead>                    <tbody>                    <c:forEach var="documentsInfo" items="${documentsInfo}">                        <tr>                            <td><a href="#" onclick="javascript:changePreviewContent('${documentsInfo.uuid}');">${documentsInfo.shortenFileName}</a></td>                            <td>${documentsInfo.size} KB</td>                            <td>${documentsInfo.author}</td>                            <td>${documentsInfo.edit}</td>                            <td>${documentsInfo.year}</td>                            <td>                                <a href="<c:url value='/download?node=${documentsInfo.uuid}&attachment=false' />"                                   class="btn btn-default" role="button" style="font-size:10px; height:26px;">Descargar</a>                            </td>                        </tr>                    </c:forEach>                    </tbody>                </table>            </div>            <div class="text-right">                <ul class="pagination" id="pagination"></ul>            </div>        </div>        <div class="col-sm-6" style="padding: 10px 2px 2px 2px; background-color: #808080;">            <iframe id="preview-doc" style="width: 100%; border: 0px; height: 97%; display: inline; background-color: white;" src="${previewUrl}"></iframe>        </div>    </div>    <jsp:include page="/footer"/></body></html>