<!DOCTYPE html><%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %><%@ taglib prefix="u" uri="http://openkm.com/tags/utils" %><%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %><%@ page contentType="text/html;charset=UTF-8" language="java" %><html lang="es"><head>    <jsp:include page="/header"/>    <style type="text/css">        /* For select picker */        .bootstrap-select {            width: 115px !important;        }    </style>    <script type="text/javascript">        function showPreview() {            document.getElementById('preview-doc').style.display = 'inline';            calculatePreviewHeight(); // Redimensionar el iframe de la vista previa        }        // Funcipara calcular la altura del iframe de la vista previa        function calculatePreviewHeight() {            var position = $("#preview-doc").offset();            $("#preview-doc").height($(window).height() - (position.top + 27));        }        // Llamar a la funcide redimensionamiento al cargar y redimensionar la ventana        window.onload = function() {            showPreview(); // Mostrar la vista previa por defecto al cargar la p        };        window.onresize = function() {            if (document.getElementById('preview-doc').style.display === 'inline') {                calculatePreviewHeight();            }        };        function changePreviewContent(uuid) {            $.get('${pageContext.request.contextPath}/propertyGroup/getPreviewURL',                {                    uuid: uuid                },                function (data, status, xhr) {                    if (status === "success") {                        $('#preview-doc').attr('src', data);                    }                }            );        }        function clearPreviewExternal() {            const previewFrame = document.getElementById("preview-doc");            if (previewFrame) {                previewFrame.src = ""; // Borra la URL del iframe para limpiar la vista previa            }        }        // Función que llama a ambas acciones de limpieza        function cleanAllExternal() {            clearPreviewExternal(); // Limpiar la vista previa        }        $(document).ready(function () {            $('#searchButtonExternal').on('click', function () {                $("#searchButtonExternal").html('Searching...');                $("#chgPrjForm").submit();            });        });    </script></head><body class="body-index"><jsp:include page="/menu">    <jsp:param name="title" value="BIBLIOTECA EXTERNA" /></jsp:include><div class="container-fluid" style="background-color:#f1f1f1; padding: 0; margin-top: -17px;">    <div class="row"> <!-- Primera fila para la distribución -->        <div class="col-sm-6"> <!-- Sección izquierda con formulario y botones -->            <form role="form" id="chgPrjForm"                  action="${pageContext.request.contextPath}/searchExternal/" method="post"                  class="form" style="margin:10px 0 10px 0;">                <div class="form-group" style="padding: 10px 0 0 40px; display: flex; align-items: center;">                    <!-- Mayor margen izquierdo para desplazar el elemento -->                    <label for="Content" style="margin-right: 10px; font-size: 16px">                        AUTHOR                    </label>                    <select id="selectExternal" name="selectExternal" class="form-control" required>                        <option value="">Elija...</option>                        <c:forEach var="varokg" items="${selectOptions}">                            <c:set var="varokgvalue" value="${varokg.valueName}"/>                            <option value="${varokgvalue}">${varokg.labelName}</option>                        </c:forEach>                    </select>                    <!-- Botones al lado derecho -->                    <button id="searchButtonExternal" type="button" style="margin-left: 10px;">                        BUSCAR                    </button>                    <button id="cleanButtonExternal" type="button"  style="margin-left: 10px;" onclick="cleanAllExternal()">                        LIMPIAR                    </button>                </div>                <div class="help-block with-errors"></div>            </form>        </div>    </div>    <!-- Segunda fila para el iframe de vista previa -->    <div class="row">        <div class="col-sm-12" style="padding: 10px 2px 2px 2px; background-color: #808080;">            <iframe id="preview-doc" style="width: 100%; border: 0px; height: 97%; background-color: white;" src="${urlView}"></iframe>        </div>    </div></div>    <jsp:include page="/footer"/></body></html>